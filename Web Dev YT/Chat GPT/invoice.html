<!-- generate_invoice.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Generate Invoice</title>
    <link rel="stylesheet" href="styles.css">
    <script src="jquery.min.js"></script>
</head>
<body>
    <form id="invoiceForm" action="generate_invoice.php" method="POST">
        <label for="item_code">Item Code:</label>
        <input type="text" id="item_code" name="item_code" required>
        <button type="button" id="fetchDetails">Fetch Details</button>

        <label for="item_name">Item Name:</label>
        <input type="text" id="item_name" name="item_name" readonly>
        
        <label for="unit_price">Unit Price:</label>
        <input type="number" id="unit_price" name="unit_price" readonly>

        <label for="selling_price">Selling Price:</label>
        <input type="number" id="selling_price" name="selling_price" readonly>

        <label for="customer_name">Customer Name:</label>
        <input type="text" id="customer_name" name="customer_name" required>

        <label for="sold_date">Sold Date:</label>
        <input type="date" id="sold_date" name="sold_date" required>

        <button type="submit">Generate Invoice</button>
    </form>

    <script>
        $('#fetchDetails').click(function() {
            var itemCode = $('#item_code').val();
            $.ajax({
                url: 'fetch_product_details.php',
                type: 'GET',
                data: {item_code: itemCode},
                success: function(data) {
                    var product = JSON.parse(data);
                    $('#item_name').val(product.item_name);
                    $('#unit_price').val(product.unit_price);
                    var sellingPrice = product.unit_price * 1.20; // Add 20% VAT
                    $('#selling_price').val(sellingPrice.toFixed(2));
                }
            });
        });
    </script>
</body>
</html>